<!--
/**
 * Copyright Â© Magento, Inc. All rights reserved.
 * See COPYING.txt for license details.
 */
-->
<!-- ko ifnot: isCustomerLoggedIn() -->

<!-- ko foreach: getRegion('before-login-form') -->
<!-- ko template: getTemplate() --><!-- /ko -->
<!-- /ko -->
<form class="form form-login" data-role="email-with-possible-login"
      data-bind="submit:login"
      method="post">
    <!-- ko if: (window.checkoutConfig.enable_on_checkoutpage == 1) -->
    <fieldset id="customer-email-fieldset" class="fieldset" data-bind="blockLoader: isLoading">
      <!-- ko if: (window.checkoutConfig.otplogin == 'login_both') -->
        <div class="login-container">
          <div class="login-left">
            <div class="smsprofile-login-option">
              <div class="login-option-tab">
                <div class="login-mobile active" data-md-js="md-login-opt"><input type="button" class="login-opt" name="Mobile" id="login-opt-mobile" data-bind="value: 'Login with OTP'" /></div>
                <div class="login-email" data-md-js="md-login-password"><input type="button" class="login-opt" name="Email" id="login-opt-email" data-bind="value: 'Login with Password'"  /></div>
              </div>
            </div>
          </div>
        </div>
        <!-- /ko -->
         <!-- ko if: (window.checkoutConfig.otplogin == 'login_otp' || window.checkoutConfig.otplogin == 'login_both') -->
        <div class="field field-mobile required smsprofile-login-mobile">
          <label class="label" for="login-email"><span data-bind="i18n: 'Please Enter Email or Mobile Number'"></span></label>
          <input type="hidden" value="" id="countryreg" name="countryreg" />
          <input type="hidden" value="" id="countryregcode" name="countryregcode" />
          <div class="control">
            <input name="mobile"
            id="login_mobile"
            type="text"
            class="input-text required-entry"
            data-bind="afterRender: MageMobileRenderComplete" autocomplete="off"
            />
            <p class="profile-notice-phone"><!-- ko text: window.checkoutConfig.otpnote --><!-- /ko --></p>
          </div>
          <div class="field" style="margin-top: 15px;">    
            <button class="send_otp_login action primary popup"  style="display: none" type="button"><span data-bind="i18n: 'Generate Otp'"></span></button>
            <span class="otp_generatenote">&nbsp;</span>
            <div class="control">
              <input class="input-text verifiedotp"
              type="hidden"
              name="otp"
              id="customer-otp"
              value="0" />                    
            </div>
          </div>
          <div class="resendotp-block popup" style="display: none">
            <p class="resend-wait"><span data-bind="i18n: 'Resend In'"></span> 
              <span class="time" data-bind="text: window.checkoutConfig.resend_limit_time"></span>
              <span data-bind="text:'Seconds'"></span>
            </p>
            
            <div class="resendlink" style="display: none;">
             <button class="resendotp" type="button"><span data-bind="i18n: 'Resend OTP'"></span></button>
           </div>
           
           <div class="resend-link-attempt" style="display: none"></div>
           <div class="field field-name-otp required">
            <label class="label" for="otp">
              <span><span data-bind="i18n: 'Please enter verification code here'"></span></span>
            </label>
            <div class="control">
              <input id="otp" name="otp" value="" title="otp"
              class="input-text required-entry popup"
              autocomplete="off"  type="text" style="width: 200px;">
              <button class="verif_otp_login action primary"
              type="button"><span data-bind="i18n: 'Verify OTP'"></span></button>
            </div>
          </div>
        </div>
        <span class="otp_text"></span>
        <input type='hidden' name='form_type' id="form_type" data-bind="value: 'checkout-login'" />
        <input type='hidden' name='auto_verify_otp' id="auto_verify_otp" data-bind="value: window.checkoutConfig.auto_verify_otp" />
        <input type='hidden' name='resend_limit' id="resend_limit" data-bind="value: window.checkoutConfig.resend_limit"/>
        <input type='hidden' name='resend_limit_time' id="resend_limit_time" data-bind="value: window.checkoutConfig.resend_limit_time"/>
        <input type='hidden' name='resend_link_disable' id="resend_link_disable" data-bind="value: window.checkoutConfig.resend_link_disable"/>
        <input type='hidden' name='verifyotp' class='verifiedotp' data-bind="value: '0'"/>
        <!-- ko if: (window.checkoutConfig.customer_country_enabled == 0) -->
        <input type='hidden' id="default_mobile_validation" data-bind="value: window.checkoutConfig.mobile_default_validation"/>
        <!-- /ko -->
      </div>
      <!-- /ko -->
      <!-- ko if: (window.checkoutConfig.otplogin == 'login_pwd' || window.checkoutConfig.otplogin == 'login_both') -->
        <div class="field required block-customer-login">
              <label class="label" for="customer-email"><span data-bind="i18n: 'Please Enter Email or Mobile Number'"></span></label>
              <div class="control _with-tooltip">
                  <input class="input-text required-entry"
                         type="text"
                         data-bind="
                              mageInit: {'mage/trim-input':{}}"
                         name="username"
                         id="customer-email" autocomplete="off"/>
                  <!-- ko template: 'ui/form/element/helper/tooltip' --><!-- /ko -->
                  <span class="note" data-bind="fadeVisible: isPasswordVisible() == false"><!-- ko i18n: 'You can create an account after checkout.'--><!-- /ko --></span>
              </div>
          </div>
          <div class="field required block-customer-login">
                  <label class="label" for="customer-password"><span data-bind="i18n: 'Password'"></span></label>
                  <div class="control">
                      <input class="input-text required-entry"
                             data-bind="
                                  attr: {
                                      placeholder: $t('Password'),
                                  }"
                             type="password"
                             name="password"
                             id="customer-password"
                             autocomplete="off"/>
                      <span class="note" data-bind="i18n: 'You already have an account with us. Sign in or continue as guest.'"></span>
                  </div>

              </div>
      <!-- /ko -->
      <!-- ko foreach: getRegion('additional-login-form-fields') -->
        <!-- ko template: getTemplate() --><!-- /ko -->
      <!-- /ko -->
              <div class="actions-toolbar">
                  <input name="context" type="hidden" value="checkout" />
                  <div class="primary">
                      <button type="submit" class="action login primary" data-action="checkout-method-login"><span data-bind="i18n: 'Login'"></span></button>
                  </div>
                  <div class="secondary">
                      <a class="action remind" data-bind="attr: { href: forgotPasswordUrl }">
                          <span data-bind="i18n: 'Forgot Your Password?'"></span>
                      </a>
                  </div>
              </div>
    </fieldset>
    <!-- /ko -->
    <!-- ko if: (window.checkoutConfig.enable_on_checkoutpage == 0) -->
      <fieldset id="customer-email-fieldset" class="fieldset" data-bind="blockLoader: isLoading">
          <div class="field required">
              <label class="label" for="customer-email"><span data-bind="i18n: 'Email Address'"></span></label>
              <div class="control _with-tooltip">
                  <input class="input-text"
                         type="email"
                         data-bind="
                              textInput: email,
                              hasFocus: emailFocused,
                              afterRender: emailHasChanged,
                              mageInit: {'mage/trim-input':{}}"
                         name="username"
                         data-validate="{required:true, 'validate-email':true}"
                         id="customer-email" />
                  <!-- ko template: 'ui/form/element/helper/tooltip' --><!-- /ko -->
                  <span class="note" data-bind="fadeVisible: isPasswordVisible() == false"><!-- ko i18n: 'You can create an account after checkout.'--><!-- /ko --></span>
              </div>
          </div>

          <!--Hidden fields -->
          <fieldset class="fieldset hidden-fields" data-bind="fadeVisible: isPasswordVisible">
              <div class="field">
                  <label class="label" for="customer-password"><span data-bind="i18n: 'Password'"></span></label>
                  <div class="control">
                      <input class="input-text"
                             data-bind="
                                  attr: {
                                      placeholder: $t('Password'),
                                  }"
                             type="password"
                             name="password"
                             id="customer-password"
                             data-validate="{required:true}" autocomplete="off"/>
                      <span class="note" data-bind="i18n: 'You already have an account with us. Sign in or continue as guest.'"></span>
                  </div>

              </div>
              <!-- ko foreach: getRegion('additional-login-form-fields') -->
              <!-- ko template: getTemplate() --><!-- /ko -->
              <!-- /ko -->
              <div class="actions-toolbar">
                  <input name="context" type="hidden" value="checkout" />
                  <div class="primary">
                      <button type="submit" class="action login primary" data-action="checkout-method-login"><span data-bind="i18n: 'Login'"></span></button>
                  </div>
                  <div class="secondary">
                      <a class="action remind" data-bind="attr: { href: forgotPasswordUrl }">
                          <span data-bind="i18n: 'Forgot Your Password?'"></span>
                      </a>
                  </div>
              </div>
          </fieldset>
          <!--Hidden fields -->
      </fieldset>
    <!-- /ko -->
</form>
<!-- /ko -->
